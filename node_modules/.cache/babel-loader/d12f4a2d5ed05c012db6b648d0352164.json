{"ast":null,"code":"import _defineProperty from\"C:/Users/Nevil/festivity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/Nevil/festivity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/Users/Nevil/festivity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Nevil/festivity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Nevil/festivity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import{useHistory,Link}from'react-router-dom';import Footer from'./Footer.js';import'./Login.css';import noteContext from\"../context/noteContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(props){var _jsx2;var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),credentials=_useState2[0],setCredentials=_useState2[1];var history=useHistory();var context=useContext(noteContext);var getAccountDetails=context.getAccountDetails,mihir=context.mihir,setMihir1=context.setMihir1,mihir1=context.mihir1;var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var url,response,json;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();url=\"http://localhost:5000/api/auth/login\";_context.next=4;return fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:credentials.email,password:credentials.password})});case 4:response=_context.sent;_context.next=7;return response.json();case 7:json=_context.sent;console.log(json);if(json.success){//save the auth token and redirect\nlocalStorage.setItem('token',json.authToken);props.showAlert(\"Logged In Successfully\",\"success\");history.push('/home');getAccountDetails();// destructureId();\n}else{props.showAlert(\"Invalid Credentials\",\"danger\");}case 10:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var onChange=function onChange(e){setCredentials(_objectSpread(_objectSpread({},credentials),{},_defineProperty({},e.target.name,e.target.value)));};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"body\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid main-login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"login-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"heading-login\",children:\"LOGIN\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"login-content container-fluid\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 my-3\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-envelope fa-lg \"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-lb\",children:\"\\u2002Email\"}),/*#__PURE__*/_jsx(\"input\",(_jsx2={type:\"email\",className:\"form-control\",placeholder:\"Enter your email here\",id:\"in-area\",value:credentials.email,onChange:onChange},_defineProperty(_jsx2,\"id\",\"email\"),_defineProperty(_jsx2,\"name\",\"email\"),_defineProperty(_jsx2,\"aria-describedby\",\"emailHelp\"),_jsx2))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-key fa-lg\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-lb\",children:\"\\u2002Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"Enter your password here\",value:credentials.password,onChange:onChange,name:\"password\",id:\"password\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary login-submit\",children:\"Login\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"signup-link mt-5\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"signup-tagline\",children:\"Dont have an account? Create one!\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Link,{className:\"btn btn-primary mx-1 signup\",to:\"/signup\",role:\"button\",children:\"Signup\"})})]})]})}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Footer,{})]})});};export default Login;","map":{"version":3,"sources":["C:/Users/Nevil/festivity/src/components/Login.js"],"names":["React","useState","useEffect","useContext","useHistory","Link","Footer","noteContext","Login","props","email","password","credentials","setCredentials","history","context","getAccountDetails","mihir","setMihir1","mihir1","handleSubmit","e","preventDefault","url","fetch","method","headers","body","JSON","stringify","response","json","console","log","success","localStorage","setItem","authToken","showAlert","push","onChange","target","name","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\r\nimport { useHistory, Link } from 'react-router-dom'\r\nimport Footer from './Footer.js'\r\nimport './Login.css'\r\nimport noteContext from \"../context/noteContext\"\r\n\r\nconst Login = (props) => {\r\n    const [credentials, setCredentials] = useState({ email: \"\", password: \"\" })\r\n    let history = useHistory();\r\n\r\n    const context = useContext(noteContext);\r\n    const { getAccountDetails, mihir, setMihir1, mihir1 } = context;\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const url = \"http://localhost:5000/api/auth/login\";\r\n        const response = await fetch(url, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ email: credentials.email, password: credentials.password })\r\n        });\r\n        const json = await response.json()\r\n        console.log(json)\r\n        if (json.success) {\r\n            //save the auth token and redirect\r\n            localStorage.setItem('token', json.authToken);\r\n            props.showAlert(\"Logged In Successfully\", \"success\");\r\n            history.push('/home');\r\n            getAccountDetails();\r\n            // destructureId();\r\n        }\r\n        else {\r\n            props.showAlert(\"Invalid Credentials\", \"danger\")\r\n        }\r\n    }\r\n\r\n    const onChange = (e) => {\r\n        setCredentials({ ...credentials, [e.target.name]: e.target.value })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <body>\r\n                <div className=\"container-fluid main-login\">\r\n                    <div className=\"container-fluid\">\r\n                        <div className=\"login-header\">\r\n                            <h2 className=\"heading-login\">LOGIN</h2>\r\n                        </div>\r\n                        <div className=\"login-content container-fluid\">\r\n                            <form onSubmit={handleSubmit}>\r\n                                <div className=\"mb-4 my-3\">\r\n                                    <i class=\"fas fa-envelope fa-lg \"></i>\r\n                                    <label htmlFor=\"email\" className=\"form-lb\">&ensp;Email</label>\r\n                                    <input type=\"email\" className=\"form-control\" placeholder=\"Enter your email here\" id=\"in-area\" value={credentials.email} onChange={onChange}\r\n                                        id=\"email\" name=\"email\" aria-describedby=\"emailHelp\" />\r\n                                </div>\r\n                                <div className=\"mb-4\">\r\n                                    <i class=\"fas fa-key fa-lg\"></i>\r\n                                    <label htmlFor=\"password\" className=\"form-lb\">&ensp;Password</label>\r\n                                    <input type=\"password\" className=\"form-control\" placeholder=\"Enter your password here\" value={credentials.password} onChange={onChange}\r\n                                        name=\"password\" id=\"password\" />\r\n                                </div>\r\n                                <div className=\"text-center\">\r\n                                    <button type=\"submit\" className=\"btn btn-primary login-submit\">Login</button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n\r\n                        <div className=\"signup-link mt-5\">\r\n                            <p className=\"signup-tagline\">Dont have an account? Create one!</p>\r\n                            <div className=\"text-center\">\r\n                                <Link className=\"btn btn-primary mx-1 signup\" to=\"/signup\" role=\"button\">Signup</Link>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <br></br> <br></br>\r\n                <Footer />\r\n            </body>\r\n\r\n        </>\r\n\r\n    )\r\n}\r\n\r\nexport default Login\r\n"]},"metadata":{},"sourceType":"module"}